define(["jquery"],(function(e){var t=/(\s*\S+|\s)$/,n=/^(\S*)/;e.truncate=function(t,n){return e("<div></div>").append(t).truncate(n).html()},e.fn.truncate=function(r){e.isNumeric(r)&&(r={length:r});var i=e.extend({},e.truncate.defaults,r);return this.each((function(){var r=e(this);i.noBreaks&&r.find("br").replaceWith(" ");var s=r.text(),l=s.length-i.length;if(i.stripTags&&r.text(s),i.words&&l>0){var a=s.slice(0,i.length).replace(t,"").length;l=i.keepFirstWord&&0===a?s.length-n.exec(s)[0].length-1:s.length-a-1}l<0||!l&&!i.truncated||e.each(r.contents().get().reverse(),(function(t,n){var r=e(n),s=r.text().length;return s<=l?(i.truncated=!0,l-=s,void r.remove()):3===n.nodeType?(i.finishBlock?e(n.splitText(s)).replaceWith(i.ellipsis):e(n.splitText(s-l-1)).replaceWith(i.ellipsis),!1):(r.truncate(e.extend(i,{length:s-l})),!1)}))}))},e.truncate.defaults={stripTags:!1,words:!1,keepFirstWord:!1,noBreaks:!1,finishBlock:!1,length:1/0,ellipsis:"â€¦"}}));